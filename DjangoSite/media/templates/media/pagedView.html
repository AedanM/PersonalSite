{% load static %} {% load DictTags %}
<!DOCTYPE html>
<html data-bs-theme="dark">
	<head>
		<meta charset="iso-8859-15" />

		<meta
			http-equiv="X-UA-Compatible"
			content="IE=edge" />
		<title>Media Server Description</title>
		<meta
			name="description"
			content="" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1" />
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
			rel="stylesheet" />
		<link
			rel="stylesheet"
			href="https://cdn.jsdelivr.net/npm/@picocss/pico@2.0.6/css/pico.css" />
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
		<link
			rel="stylesheet"
			href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" />
		<link
			rel="stylesheet"
			href="{% static 'styles/MasterStyle.css' %}" />
		<link
			rel="stylesheet"
			href="{% static 'styles/MediaStyle.css' %}" />
	</head>
	<script>
		function SetUrlParam(key, value) {
			const urlParams = new URLSearchParams(window.location.search);
			urlParams.set(key, String(value));
			window.location.search = urlParams;
		}
	</script>
	<body>
		<main
			class="container"
			height-min="0.75uh">
			<header class="pico">
				<nav>
					<ul>
						<li>
							<strong>Media Server</strong>
						</li>
					</ul>
					<ul>
						<li>
							<a href="/resume">About</a>
						</li>
						<li>
							<a href="/media">Media Server Access</a>
						</li>
						<li>
							<a href="/admin">Admin</a>
						</li>
					</ul>
				</nav>
			</header>
			<div class="d-flex justify-content-center">
				<a
					class="clean-link flex-grow-1"
					href="?"
					><i class="bi bi-x-diamond-fill"></i
				></a>
				<div class="flex-grow-1">
					<button
						class="clean-button"
						onclick="SetUrlParam('type', 'Movie')">
						<i class="mx-3 bi bi-film"></i>
					</button>
					<button
						class="clean-button"
						onclick="SetUrlParam('type', 'TV Show')">
						<i class="mx-3 bi bi-tv"></i>
					</button>
					<button
						class="clean-button"
						onclick="SetUrlParam('type', 'Comic')">
						<i class="mx-3 bi bi-book"></i>
					</button>
					<button
						class="clean-button"
						onclick="SetUrlParam('type', 'Book')">
						<i class="mx-3 bi bi-journal-bookmark"></i>
					</button>
					<button
						class="clean-button"
						onclick="SetUrlParam('type', 'Podcast')">
						<i class="mx-3 bi bi-mic"></i>
					</button>
					<button
						class="clean-button"
						onclick="SetUrlParam('type', 'Youtube')">
						<i class="mx-3 bi bi-youtube"></i>
					</button>
				</div>
				<button
					class="clean-button"
					onclick="document.location = '/media/wiki'">
					<i class="mx-3 bi bi-wikipedia"></i>
				</button>
			</div>
			<div class="d-flex flex-column">
				<div>
					<div class="d-flex flex-wrap justify-content-center gap-3">
						{% for show in page_obj %}
						<div class="mt-4 card">
							<a href="{{show.InfoPage}}"
								><img
									class="card-img-top movie-logo"
									src="{%static show.Logo%}"
									alt="{{show.Title}}"
							/></a>
							<div class="card-body">
								<div class="d-flex">
									<a
										href="view?id={{show.id}}"
										class="clean-link"
										><strong class="card-title flex-grow-1">{{show.Title}}</strong></a
									>
								</div>
								<div class="d-flex">
									<p class="flex-grow-1">
										{{show.Year}}{{show.Length}}{% if show|HasAttr:"Length"%} Seasons{% endif %}
									</p>
									{% if show.Rating != 0 %}
									<p
										id="rating"
										class="flex-grow-1">
										{{show.Rating|rating}}
									</p>
									{%endif%}
									<p>{{show.Duration}}</p>
								</div>

								<div class="d-flex flex-wrap justify-content-center">
									{% for genre in show.GenreTagList %}
									<span class="genre-badge badge rounded-pill bg-secondary"
										><button
											onclick="SetUrlParam('genre', '{{genre}}')"
											style="text-decoration: none"
											class="text-white clean-button">
											{{genre}}
										</button></span
									>
									{% endfor %}
								</div>
							</div>
							<div class="card-footer d-flex justify-content-center">
								<a
									class="btn"
									href="/media/setBool?field=Watched&contentId={{show.id}}">
									{% if show.Watched %}
									<i
										class="bi bi-check-square"
										style="font-size: 1.6rem"></i>
									{% else %}
									<i
										class="bi bi-square"
										style="font-size: 1.6rem"></i>
									{% endif %}
								</a>
								<a
									class="btn"
									href="/media/setBool?field=Downloaded&contentId={{show.id}}">
									{% if show.Downloaded %}
									<i
										class="bi bi-arrow-down-square"
										style="font-size: 1.6rem"></i>
									{% else %}
									<i
										class="bi bi-square"
										style="font-size: 1.6rem"></i>
									{% endif %}
								</a>
							</div>
						</div>

						{%endfor%}
					</div>
					<div class="pagination d-flex align-items-center justify-content-center">
						<span
							class="step-links"
							style="font-size: 1rem">
							{% DottedPageRange page_obj.paginator page_obj.number as page_range %} {% for pageNum in page_range %}
							{% if pageNum != page_obj.paginator.ELLIPSIS%}
							<button
								onclick="SetUrlParam('page', '{{pageNum}}')"
								class="clean-button">
								{% if pageNum == page_obj.number%}
								<strong>{{pageNum}}</strong>
								{%else%} {{pageNum}} {%endif%}
							</button>
							{%else%} {{pageNum}} {%endif%} {% endfor %}
						</span>
					</div>
				</div>
			</div>
		</main>
	</body>
</html>
